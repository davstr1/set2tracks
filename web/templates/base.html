<!DOCTYPE html>
<html lang="en" data-theme="set2tracks">
<style>
    /* QnDirty fix to a mysterious page width problem on mobile
    Page would not take up all horizontal space + there is horizontal scrollbar
    Yet no element seems to cause an overflow
    @TODO : investigate that, when i retire, if i have time...and want to. */
    html,
    body {
        width: 100%;
        overflow-x: hidden;
    }
</style>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ l.page_title if l is defined and l.page_title is defined else 'no title' }}</title>

    <link href="{{url_for('static',filename='css/tailwind/output.css')}}" rel="stylesheet">
</head>

<body class="bg-primary-content min-h-screen lg:overflow-x-hidden p-0">

    <svg xmlns="http://www.w3.org/2000/svg" class="hidden">
        <symbol id="icon-link-external" class="h-6 w-6" viewBox="0 0 8 10">
            <path class="fill-base-content hover:fill-primary" d="M7.625,3.5c-0.101,0-0.191-0.041-0.259-0.105C7.364,3.393,7.361,3.393,7.359,3.391  L6.427,2.458l-2.36,2.36c-0.244,0.243-0.64,0.243-0.884,0c-0.244-0.244-0.244-0.64,0-0.884l2.359-2.359L4.609,0.641  C4.607,0.639,4.607,0.636,4.605,0.634C4.541,0.566,4.5,0.476,4.5,0.375C4.5,0.168,4.668,0,4.875,0H7.5C7.776,0,8,0.224,8,0.5v2.625  C8,3.332,7.832,3.5,7.625,3.5z M1,2.25v4.5C1,6.888,1.112,7,1.25,7h4.5C5.888,7,6,6.888,6,6.75V4l1,1v2c0,0.553-0.447,1-1,1H1  C0.448,8,0,7.553,0,7V2c0-0.552,0.448-1,1-1h2l1,1H1.25C1.112,2,1,2.112,1,2.25z" />
        </symbol>
    </svg>


    <div class="container mx-auto w-full pl-3 pr-3 lg:pl-5 lg:pr-5 xl:w-3/4">
        <header class="border-b-2 border-slate-200 w-full mb-8">
            <nav id="navbar" class="mx-auto flex items-center justify-between py-5" aria-label="Global">
                <div class="flex lg:flex-1">
                    {% include 'logo.html' %}
                </div>

                <div class="hidden lg:flex lg:gap-x-12">
                    <a href="{{url_for('channel.channels')}}" class="text-sm font-semibold leading-6 py-2.5 px-4">Channels</a>
                </div>

                <div class="hidden lg:flex lg:gap-x-12">
                    <a href="{{url_for('playlist.my_playlists')}}" class="text-sm font-semibold leading-6 py-2.5 px-4">{{_("My Playlists")}}</a>
                </div>

                <div class="hidden lg:flex lg:flex-1 lg:justify-end">
                    <a href="{{ url_for('basic.quickstart') }}" class="discreet text-sm font-semibold leading-6 py-2.5 px-4">QuickStart</a>
                    <a href="{{ url_for('basic.help') }}" class="discreet text-sm font-semibold leading-6 py-2.5 px-4">Feedback/Help</a>

                    {% if current_user.is_authenticated %}
                    <a href="{{ url_for('users.logout') }}" class="text-sm font-semibold leading-6 py-2.5 px-4"> [{{current_user.fname}}] Logout </a>
                    {% else %}
                    <a href="{{ url_for('users.login') }}" class="text-sm justify-center font-semibold  py-2.5  leading-6">{{_("Sign in")}} </a>
                    <a class="justify-center rounded-lg text-sm font-semibold py-2.5 px-4 text-white bg-slate-900 hover:bg-slate-700 ml-8" href="{{ url_for('users.register') }}">
                        <span>{{_("Register")}}<span aria-hidden="true">â†’</span></span>
                    </a>
                    {% endif %}
                </div>

                <!-- Mobile menu button -->
                <div class="lg:hidden flex items-center">
                    <input type="checkbox" id="mobile-menu-toggle" class="peer hidden" />
                    <label for="mobile-menu-toggle" class="cursor-pointer">
                        <svg class="h-8 w-8 text-gray-500 hover:text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                    </label>
                </div>
            </nav>

            <!-- Mobile menu -->
            <div id="mobile-menu" class=" border-2 absolute left-3 right-3 bg-primary-content hidden peer-checked:flex flex-col lg:hidden z-50 ">
                <div class="pt-2 pb-3 space-y-1">
                    <a href="{{url_for('playlist.my_playlists')}}" class="block pl-3 pr-4 py-2 text-base font-medium text-gray-700">{{_("My Playlists")}}</a>
                    <a href="{{ url_for('basic.quickstart') }}" class="block pl-3 pr-4 py-2 text-base font-medium text-gray-700">QuickStart</a>
                    <a href="{{ url_for('basic.help') }}" class="block pl-3 pr-4 py-2 text-base font-medium text-gray-700">Feedback/Help</a>
                </div>
                <div class="pt-4 pb-3 border-t-2 border-slate-200">
                    {% if current_user.is_authenticated %}
                    <div class="mt-3 space-y-1">
                        <a href="{{ url_for('users.logout') }}" class="block pl-3 pr-4 py-2 text-base font-medium text-gray-700">{{_("Logout")}}</a>
                    </div>
                    {% else %}
                    <div class="mt-3 space-y-1">
                        <a href="{{ url_for('users.login') }}" class="block pl-3 pr-4 py-2 text-base font-medium text-gray-700">{{_("Sign in")}}</a>
                        <a href="{{ url_for('users.register') }}" class="block pl-3 pr-4 py-2 text-base font-medium text-gray-700">{{_("Register")}}</a>
                    </div>
                    {% endif %}
                </div>
            </div>
        </header>









        <main class="min-h-screen">

            {% block content %}
            <!-- Page specific content will be inserted here -->
            {% endblock %}
        </main>

        <footer class="bg-gray-800 py-6 mt-52">
            <div class="container mx-auto px-4 text-white">
                <div class="flex flex-wrap justify-between">
                    <!-- Company Info -->
                    <div class="w-full sm:w-1/2 lg:w-1/4 mb-6">
                        <h3 class="text-lg font-semibold mb-2">set2tracks</h3>
                        <p>2024 set2tracks. All rights reserved.</p>
                    </div>
                    <!-- Navigation Links -->
                    <div class="w-full sm:w-1/2 lg:w-1/4 mb-6">
                        <h3 class="text-lg font-semibold mb-2">Navigation</h3>
                        <ul>
                            <li><a href="{{ url_for('basic.help') }}" class="hover:underline">Home</a></li>
                            <li><a href="{{ url_for('basic.help') }}" class="hover:underline">About Us</a></li>
                            <li><a href="{{ url_for('basic.help') }}" class="hover:underline">Contact</a></li>
                            <li><a href="{{ url_for('basic.help') }}" class="hover:underline">Privacy Policy</a></li>
                        </ul>
                    </div>
                    <!-- Social Media Links -->
                    <div class="w-full sm:w-1/2 lg:w-1/4 mb-6">
                        <h3 class="text-lg font-semibold mb-2">Stay tuned</h3>
                        <ul class="flex space-x-4">
                            <li><a href="#" class="hover:underline">Facebook</a></li>
                            <li><a href="#" class="hover:underline">Twitter</a></li>
                            <li><a href="#" class="hover:underline">Instagram</a></li>
                            <li><a href="#" class="hover:underline">LinkedIn</a></li>
                        </ul>
                    </div>
                    <!-- Contact Info -->
                    <div class="w-full sm:w-1/2 lg:w-1/4 mb-6">
                        <h3 class="text-lg font-semibold mb-2">Let's talk</h3>
                        <p>hi@set2tracks.com</p>

                    </div>
                </div>
                <div class="mt-8 text-center">
                    <p>We've got love...for the music ! Set2tracks.</p>
                </div>
            </div>
        </footer>

    </div>
    <div id="overlay" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center transition-all duration-300">
        <div class="select-none flex items-center bg-black p-10 rounded-lg ring-2 ring-primary">
            <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            Processing...
        </div>
    </div>

    <style>
        /* Define the initial state and the transition */
        #system-message {
            top: -100%;
            transition: top 0.3s ease-in-out;
        }

        #system-message.show {
            top: 0;
        }
    </style>
    {% set messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}

    {% for category, message in messages %}
    <div id="system-message" class="show fixed w-full z-50  bg-{{category}} text-white p-4 text-center transition-all duration-300">

        <div class="message">{{ message }}</div>


        <button class="absolute top-1 right-1 text-white hover:text-gray-200 focus:outline-none">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
            </svg>
        </button>
    </div>
    {% endfor %}
    {% else %}
    <div id="system-message" class="fixed w-full  z-50 bg-info text-white p-4 text-center transition-all duration-300">
        <div class="message"></div>

        <button class="absolute top-1 right-1 text-white hover:text-gray-200 focus:outline-none">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
            </svg>
        </button>
    </div>
    {% endif %}



    {% if is_admin() %}
    <div class="fixed bottom-0 right-0 bg-red-500 text-white p-2 rounded-tl-lg z-50">
        <a href="{{url_for('admin.admin')}}">Admin</a>
        
    </div>
    {% endif %}
    <audio id="notifSound">
        <source src="{{url_for('static',filename=notif_sound)}}" type="audio/mpeg">
      </audio>

</body>
{% include 'js_all_pages.html' %}
<script>
    SYSTEM_MESSAGE_TIMEOUT_MS = 5000;
    var textField = document.querySelector('form input[type="text"]');
    if (textField) {
        textField.focus();
    }
    let SystemMessagetimeoutID;
    const systemMessage = document.getElementById('system-message');
    const systemMessageContent = document.querySelector('#system-message .message');
    const sytemMessageCloseButton = document.querySelector('#system-message button');

    sytemMessageCloseButton.addEventListener('click', () => {
        systemMessage.classList.remove('show');
    });
    if (typeof(systemMessageContent) !== 'undefined') {
        SystemMessagetimeoutID = setTimeout(() => {
            systemMessage.classList.remove('show');
        }, SYSTEM_MESSAGE_TIMEOUT_MS);
    }
    

    function showSystemMessage(message, type = 'info') {


        // Cancel the previous timeout if it exists
        if (SystemMessagetimeoutID) {
            clearTimeout(SystemMessagetimeoutID);
        }

        systemMessageContent.innerHTML = message;
        systemMessage.classList.remove('bg-primary', 'bg-danger', 'bg-success', 'bg-warning', 'bg-info');
        systemMessage.classList.add('bg-' + type);
        systemMessage.classList.add('show');

        // Set a new timeout and store its ID
        SystemMessagetimeoutID = setTimeout(() => {
            systemMessage.classList.remove('show');
        }, SYSTEM_MESSAGE_TIMEOUT_MS);
    }




    document.getElementById('mobile-menu-toggle').addEventListener('click', function () {
        var menu = document.getElementById('mobile-menu');
        var navbar = document.getElementById('navbar');
        var navbarHeight = navbar.offsetHeight;
        menu.style.top = navbarHeight + 'px';
        menu.classList.toggle('hidden');
    });

    // Setqueue query

</script>

</html>